<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Mycara Melony Songs</title>
    <style>
      table {
        border-collapse: collapse;
        width: 100%;
      }
      th, td {
        text-align: left;
        padding: 8px;
      }
      tr:nth-child(even) {
        background-color: #f2f2f2;
      }
      #search-box {
        padding: 5px;
        margin-bottom: 10px;
        width: 300px;
      }
      #clear-search-btn {
        padding: 5px;
        margin-left: 10px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1>Mycara Melony Songs</h1>
    <input type="text" id="search-box" placeholder="Search...">
    <button id="clear-search-btn">Clear Search</button>
    <table id="songs-table">
      <thead>
        <tr>
          <th>Song Name</th>
          <th>Artist</th>
          <th>Release Date</th>
          <th>YouTube Link</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <script>
      const songsTable = document.querySelector('#songs-table tbody');
      const searchBox = document.querySelector('#search-box');
      const clearSearchBtn = document.querySelector('#clear-search-btn');
      
      const songsUrl = 'songs.csv';

      fetch(songsUrl)
        .then(response => response.text())
        .then(data => {
          const rows = data.split('\n');
          const headers = rows[0].split(',');
          const songs = [];

          for (let i = 1; i < rows.length; i++) {
            const cells = rows[i].split(',');
            if (cells.length === headers.length) {
              const song = {};
              for (let j = 0; j < headers.length; j++) {
                song[headers[j]] = cells[j].trim();
              }
              songs.push(song);
            }
          }

          renderSongs(songs);
          searchBox.addEventListener('input', () => filterSongs(songs));
          clearSearchBtn.addEventListener('click', () => {
            searchBox.value = '';
            renderSongs(songs);
          });
        });

      function renderSongs(songs) {
        songsTable.innerHTML = '';
        for (const song of songs) {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${song['Song Name']}</td>
            <td>${song['Artist']}</td>
            <td>${song['Release Date']}</td>
            <td><a href="${song['YouTube Link']}" target="_blank">Watch on YouTube</a></td>
          `;
          songsTable.appendChild(row);
        }
      }

      function filterSongs(songs) {
        const searchText = searchBox.value.trim().toLowerCase();
        const filteredSongs = songs.filter(song => {
          return song['Song Name'].toLowerCase().includes(searchText) ||
                song['Artist'].toLowerCase().includes(searchText) ||
                song['Release Date'].toLowerCase().includes(searchText);
        });
        renderSongs(filteredSongs);
      }
    </script>
  </body>
</html>
